<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:hz="http://www.hazelcast.com/schema/spring"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.hazelcast.com/schema/spring http://www.hazelcast.com/schema/spring/hazelcast-spring-3.0.xsd">

    <!--import resource="classpath:applicationContext-hazelcast.xml" /-->
 
    <!-- Beans Declaration -->
    <!--bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:/hazelcast-config.properties</value>
            </list>
        </property>
    </bean-->
 
	<hz:hazelcast id="hzInstance">
		<hz:config>
			<hz:instance-name>hzInstance</hz:instance-name>
			<!--hz:group name="dev" password="password" /-->
			<hz:properties>
				<hz:property name="hazelcast.jmx">true</hz:property>
				<hz:property name="hazelcast.jmx.detailed">true</hz:property>
				<hz:property name="hazelcast.logging.type">slf4j</hz:property>
			</hz:properties>
			<hz:network port="5701" port-auto-increment="false">
				<hz:join>
					<hz:multicast enabled="false" /> <!-- multicast-group="224.2.2.3" multicast-port="54327" /-->
					<hz:tcp-ip enabled="true">
						<!--hz:members>10.10.1.2, 10.10.1.3</hz:members-->
					</hz:tcp-ip>
				</hz:join>
			</hz:network>
			<hz:map name="dict-namespace">
				<hz:near-cache time-to-live-seconds="0" max-idle-seconds="60" eviction-policy="LRU" 
					max-size="0" invalidate-on-change="true"/>
			</hz:map>
			<hz:map name="dict-path">
				<hz:near-cache time-to-live-seconds="0" max-idle-seconds="60" eviction-policy="LRU" 
					max-size="0" invalidate-on-change="true"/>
				<hz:indexes>
					<hz:index attribute="typeId"/>
					<hz:index attribute="path" ordered="true"/>
				</hz:indexes>
			</hz:map>
			<hz:map name="dict-document-type">
				<hz:near-cache time-to-live-seconds="0" max-idle-seconds="60" eviction-policy="LRU" 
					max-size="0" invalidate-on-change="true"/>
			</hz:map>
			<hz:map name="xdm-element">
				<!--hz:indexes>
					<hz:index attribute="documentId"/>
					<hz:index attribute="path" ordered="true"/>
					<hz:index attribute="value"/>
				</hz:indexes-->
			</hz:map>
			<hz:map name="xdm-document">
			</hz:map>
			<hz:serialization>
				<!--hz:portable-version>0</hz:portable-version-->
				<!--hz:portable-factories>
					<hz:portable-factory factory-id="1" class-name="com.bagri.xdm.access.hazelcast.pof.XDMPortableFactory"/>
				</hz:portable-factories-->
				<!--hz:serializers-->
					<!--hz:global-serializer class-name="com.hazelcast.nio.serialization.PortableSerializer"/-->
					<!--hz:serializer type-class="com.bagri.xdm.XDMData" class-name="com.bagri.xdm.hazelcast.pof.XDMDataSerializer"/>
				</hz:serializers-->
			</hz:serialization>
		</hz:config>
	</hz:hazelcast>

	<hz:map id="xdm-document" name="xdm-document" instance-ref="hzInstance" />
	<hz:map id="xdm-element" name="xdm-element" instance-ref="hzInstance" />
	<hz:map id="dict-document-type" name="dict-document-type" instance-ref="hzInstance" />
	<hz:map id="dict-path" name="dict-path" instance-ref="hzInstance" />
	<hz:map id="dict-namespace" name="dict-namespace" instance-ref="hzInstance" />

	<hz:idGenerator id="xdm.document" name="xdm.document" instance-ref="hzInstance"/>
	<hz:idGenerator id="xdm.element" name="xdm.element" instance-ref="hzInstance"/>
	<hz:idGenerator id="xdm.path" name="xdm.path" instance-ref="hzInstance"/>
	<hz:idGenerator id="xdm.namespace" name="xdm.namespace" instance-ref="hzInstance"/>
	<hz:idGenerator id="xdm.doctype" name="xdm.doctype" instance-ref="hzInstance"/>
	
	<bean id="xdmManager" class="com.bagri.xdm.access.hazelcast.impl.DocumentManagementClient">
		<!--constructor-arg value="map" /-->
		<property name="hzInstance" ref="hzInstance"/>
	</bean>
</beans>